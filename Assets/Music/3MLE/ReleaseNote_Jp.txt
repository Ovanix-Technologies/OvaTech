-----------------------------------------------------------------------------------------------------
  3ML EDITOR V2.0.3 Build 783                                    Mabinogi Music Macro Language Editor
  http://aloe.or.tp/tools/3mle/                    Copyright(c) 2005 - 2008 ALOE All rights reserved.
-----------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------

○バージョン履歴
    V2.0.3 Build 783 (2008年6月22日)
        ▽修正
          ・一部文字コードのファイルを読み込む際、文字化けが発生する不具合を修正
          ・メイン画面の楽器選択プルダウンが選択できない不具合を修正
          ・一部環境で再生テンポが狂う問題を修正

    V2.0.2 Build 777 (2008年6月10日)
        ▽修正
          ・【重要】再生中CPUパワーを使いきってしまう不具合を修正
          ・一部環境で再生テンポが狂う問題を修正
        ▽機能向上
          ・ショートカットキー設定をファイルとして同封するのではなく初回起動時に
            作成するように変更
    
    V2.0.1 Build 720 (2008年6月8日)
        ▽新機能
          ・開発環境 Visual C++ 2008 に移植
          ・分解能未指定のファイルに対して、デフォルトの分解能とは異なった分解能を
            割り当てられるように設定を追加
        ▽修正
          ・一部ウィンドウレイアウトを変更
    
    V2.0.0 Build 665 (2008年6月1日)
        ▽修正
          ・鍵盤で白鍵をおしても"+"記号が入ってしまう不具合を修正 (何やってるんだ私は・・

    V2.0.0 Build 664 (2008年6月1日)
        ▽修正
          ・鍵盤で黒鍵をおしても"+"記号が入らない不具合を修正
          ・プロパティウィンドウからTPQNを変更したとき、既存のマーカーの位置が異常になる不具合を修正
          ・一部環境で言語ファイル設定を読み込めない不具合を修正
          ・MMSファイルのトラックのマーカー設定がうまく読み込めてなかった不具合を修正

    V2.0.0 Build 654 (2008年5月31日)
        ▽新機能
          ・多言語対応
          ・32TPQN→96TPQN マイグレーション(移行)機能実装
          ・Unicode, UTF-8のファイル読み込み対応
          ・コードカーソル追従機能の実装
          ・スプラッシュ画面の実装
          ・トラックの中のMMLを直接圧縮する機能を実装
          ・トラックグループの実装
          ・トラックグループの音符衝突表示の実装
          ・トラックグループのリンク実装
          ・ピアノロールの表示モードの追加
          ・ユーザーカスタム ショートカット機能実装
          ・楽器プリセット機能の実装
          ・鍵盤の実装
          ・遅延MMLインタプリタ実装
          ・Windows Vistaへの正式対応
        ▽機能向上
          ・DirectMusicの起動の高速化
          ・96TPQNへの対応
          ・MMLインタプリタの修正
          ・MMLインタプリタの速度向上
          ・MML圧縮能率の向上
          ・アンドゥ・リドゥ機能の制限修正
          ・ドラムエディタモード実装
          ・ピアノロールの色の調整
          ・ピアノロールの表示速度改善
          ・メモリ使用量削減
          ・関連付けコンポーネントの修正
          ・標準テンプレートライブラリをSTLportに入れ替え
        ▽修正
          ・マビノギDLSの検出コンポーネントのUnicode化に伴う修正
          ・メモリリークの修正

    V1.11.0.0
        ▽新機能
          ・GDI+を使用したピアノロールの半透明描画機能
        ▽機能向上
          ・ピアノロールの"全トラック"モードにて、対象外トラックのノートを細く描画するように変更
        ▽修正
          ・MMLの最後記号次が改行の場合に、その記号をピアノロール上でダブルクリックした時
            コードウィンドウで次の行が選択されてしまう不具合を修正
          ・MML最適化
            →連続したタイ記号"&"の間に"L"記号が出力されタイが切れてしまう不具合を修正
          ・MMLインタプリタ
            →テンポチェンジ記号"T"後にタイが出現した場合、タイが成立してしまう不具合を修正
          
          ・他、色々(笑)

    V1.10.0.0
        ▽新機能
          ・WAVEファイル出力機能実装
          ・演奏モニタ機能実装
          ・文字検索＆置換機能実装
          ・自動保存機能
          ・マーカー実装
          ・MIDI設定画面を改良
            →DLS設定でサンプリングレート・チャンネル数・ボリューム、各種エフェクト設定が可能
          ・トラックプロパティを実装
            →トラック名、楽器・ボリューム・パンポットを一括設定
          ・テキストカーソル位置の各種情報をステータスバーに表示する機能を追加
            →テンポ・オクターブ・ベロシティ・デフォルト長
          ・ピアノロール上のノートにマウスカーソルを当てるとツールチップを表示する機能を実装

        ▽機能向上
          ・クリップボード出力の操作性向上
          ・再生中の楽器変更に対応
          ・MMLファイルから"EnsemblePlayer"の記述を読み取るように変更
          ・マビノギ音色演奏設定ツールを廃止、初期設定でマビノギのDLSファイルを自動検出するように変更
          ・MabiMMLファイルにトラックの並び替えを記憶するように変更
          ・環境設定に"新規作成時のトラック数"、"描画フレームレート"を追加
          ・ダブルクリックで作業中のトラック以外でも選択可能に変更
          ・ウィンドウ位置保存・復元方法変更により、異なる解像度の環境移行やマルチディスプレイ等に対応
          ・Undo/Redoを全てのトラックで共通化

        ▽修正
          ・【重要】MabiMMLファイルの記述形式を変更 → ReadMe.txtを参照
          ・Track10不具合修正
          ・"Microsoft DirectMusic DLS 高音質"と"Microsoft DirectMusic DLS 低音質"を廃止
          ・MIDI設定と一般設定を環境設定に統合
          ・トラックタブにてトラック名編集中に"Ctrl+C"や"Ctrl+V"が使えない点を修正
          ・ピアノロールの描画エンジンをトリプルバッファに変更
          ・通常および拡張MMLリアルタイムコンパイラを修正
          ・Hold1-ON(CC#64)を送信したまま、再生停止および再生一時停止を行った場合、音が消えない不具合を修正
          ・DirectMusic DLSの同時発声数を32音(デフォルト値)から1000音(限界値)に上方修正
            →複数のトラックで大量に音が鳴っている状況で(複数のトラックでアルペジオなど)
              発音されないノートが出てくる現象を回避
          ・MRU(最近使ったファイル)で選択したファイルが存在しない場合、MRUから消えない不具合を修正
          ・クリップボードからMMLを入力した時、音色が反映されない不具合を修正
          ・メニュー描画ライブラリを入れ替え
          ・MML再生エンジン
            →スレッドのアイドル制御を修正
            →ノートオフアルゴリズムを入れ替え
            →テンポチェンジのクロック計算を修正
              激しくテンポを変更した後、L64の音を断続的に配置した場合
              CPU負荷の状況により、その音が発声されない不具合が解消されます。
         
    V1.9.0.1
        ▽修正
            ・トラックを削除した場合、ピアノロールに削除したトラックが
              表示されたままになる不具合を修正
    
    V1.9.0.0
        ▽新機能
            ・ピアノロールの音符ダブルクリックで
              コードウィンドウとイベントリストの該当箇所を選択する機能を追加
            ・クリップボードのMMLを入力で楽器設定と追加読み込み機能を追加
            ・プロパティの項目にメモを追加
            ・まきまびしーく(仮)形式のファイルの読み込みに対応
            ・トラック管理機能追加
              →トラック追加         Ctrl+T
              →トラック削除         タブの一番右のｘをクリック
              →トラック名前付け     トラックタブをダブルクリック
              →トラック順序入れ替え トラックタブをドラッグ
        ▽機能向上
            ・マウスのスクロールでピアノロールの拡大・縮小を実装
              →Ctrl         + マウスホイール : 垂直方向の拡大縮小
              →Ctrl + Shift + マウスホイール : 水平方向の拡大縮小
            ・エディタのフォント設定を追加
            ・小節戻し/送り、先頭戻しのショートカットキー追加
            ・ピアノロール＋コード(縦)表示モード追加
            ・再生中に表示モードを設定できるように変更
            ・MML最適化の圧縮率向上
              →スイッチングロスシミュレーション回数制限を調整
              →半数ヒットパターン検索を強化
              例１
                  入力：c4.c4.c4.c4.
                  旧  ：c.c.c.c.
                  新  ：l4.cccc
              例２ 
                  入力：c4c4c4c4c4.c4.c4.c4.
                  旧  ：cccccccc.c.c.c.c.
                  新  ：cccccccl4.ccccc
        ▽修正
            ・MML最適化によって、文字数が増加してしまった場合
              最適化前のMMLを出力するように変更
            ・プロパティ画面を変更
            ・クリップボード出力画面を変更
            ・標準MIDIファイル入力で付点全休符(r1.)を出力しないように変更
            ・標準MIDIファイル出力の一定の条件において
              WindowsMediaPlayerで再生できない不具合を修正
            ・Track10(MIDI 10ch)を使用出来ないように変更
    
    V1.8.0.0
        ▽新機能
            ・曲の拍子設定機能を追加
              →[ファイル(F)]→[プロパティ(P)]で設定できます。
            ・ピアノロールの表示モード追加
              編集中のトラック以外は薄く表示
            ・ピアノロールのピアノ鍵盤をクリックすると音が出る機能追加
        ▽機能向上
            ・作曲ランク判定をランク1まで対応
            ・ステータスバーに拍子・文字数表示を追加
            ・マビノギ内楽器の尺八(未実装)の演奏に対応
        ▽修正
            ・MML最適化の休符最適化不具合を修正 その２
            ・MMLを何も入力してない状態で再生すると異常終了する不具合を修正
            ・トラックタブの切り替え時の異常終了対策
            ・トラックタブのクリック判定を修正
            ・クリップボードへMMLを出力
              「MabiMML方式」を選んだときに出力対象トラックのリストボックスを操作できないように変更
            ・クリップボードのMMLを入力
              タイトルと出展が更新されてない不具合を修正
            ・ピアノロール、編集中のトラックを優先的に描画されるように変更

    V1.7.1.1
        ▽修正
            ・Microsoft DirectMusic DLS 低音質で音色切り替えがうまくいってなかった点を修正

    V1.7.1.0
        ▽機能向上
            ・再生機能に小節送り・戻しを追加
            ・Microsoft DirectMusic DLSに低音質モードを追加
              →マビノギ内の音質を再現できます。
        ▽修正
            ・MML最適化の休符最適化不具合を修正
            ・ピアノロール＆コードのみ表示でイベントリストが表示されてしまう点を修正
            ・一時停止の動作を変更
            ・演奏停止時にイベントリストが一番上まで戻ってしまう点を修正
    
    V1.7.0.0
        ▽新機能
            ・ピアノロール＆コードのみを表示するモードを追加
            ・テキストカーソル位置から再生する機能を追加
            ・テキストカーソル位置を調べる機能を追加
              →コードウィンドウで右クリック
            ・繰り返し再生機能を追加
            ・音源リセットのシーケンスを変更
              →アプリケーション起動時にリセットされます。
              →リセットのためのSysExを選択可 
                なし/GM/GS/XG/SC88/SD80
        ▽機能向上
            ・ピアノロールの縦幅倍率をもっと縮むように変更
            ・再生停止のショートカットキーを追加　→　ESCキーです
            ・クリップボードへ出力時のランク判定をランク9までに対応
            ・トラックタブに、ピアノロールのノートの色が表示されるようになります。
        ▽修正
            ・クリップボード出力で最適化機能を使用し出力した場合において
              最適化後、文字数順にトラックの入れ変えていなかった点を修正
            ・クリップボード出力のショートカットキーを『F7』に変更

    V1.6.1.1
        ▽機能向上
            ・標準MIDIファイル入力の改良
               プロファイル(プリセット)を実装
            ・メニュー・ツールバーライブラリの描画コードを一部改良
            ・ウィンドウスタイルを選択できるように設定項目追加
              メニュー[設定(S)]→[一般設定(G)]にウィンドウスタイルの設定項目から
              設定が出来ます。
        ▽その他
            ・マビノギゲーム内の音で演奏する為の
              簡易設定ツール "マビノギ音色演奏設定.exe"を付属

    V1.6.1.0
        ▽新機能
            ・Microsoft DirectMusic DLSのDLS音色ファイル設定を追加
              "MSXspirit.dls"以外のDLS音色ファイルも使用できるようになります。
              前バージョンまでに、『MIDI出力先』を『Microsoft DirectMusic DLS』に
              設定している場合は再度、設定を行ってください。
            ・拡張MMLコマンド追加
                p    パンポット           0 ～ 127
                E    エクスプレッション   0 ～ 127
        ▽機能向上
            ・標準MIDIファイル入力の改良
              ⇒「コントロールコマンドを別トラックに」の機能を追加
                1MIDIトラック→複数MMLトラック変換適用時にプログラムチェンジや
                コントロールチェンジ、SysExなどをまとめて別のトラックに出力
              ⇒SMF Format-1のマルチポート(32チャンネルMIDIなど)を認識するように変更
                ただし、インポート結果にはポートは反映されません。
                SMF Format-0のマルチポートには対応していません。
        ▽修正
            ・MMLファイル入力の不具合修正
              そろそろMMLファイルの限界か？
            ・再生時のタブ切り替えの不具合修正
              ⇒メモリ管理をLocalAlloc系からVirtualAlloc系に変更
              ⇒タブ切り替え動作中及びピアノロール切り替え動作中は
                割り込みスレッド(表示系)をサスペンドするように修正
            ・MMLクリップボード出力でコメント部分が出力されてしまう不具合を修正
            ・標準MIDI出力のデフォルト形式を"SMF Format-1"に変更
            ・DirectMusicのMusicバッファの調整

    V1.6.0.1
        ▽修正
            ・MML演奏ライブラリの初期化の不具合を修正

    V1.6.0.0
        ▽新機能
            ・標準MIDIファイル入力を実装
            ・拡張MMLコンパイラ実装
              ポリフォニック・キー・プレッシャー、チャンネル・プレッシャー以外、出力できるようになります。
              詳細は『拡張版MML解析の仕様』を参照。
        ▽機能向上
            ・トラックを16トラックに増加
            ・標準MIDI出力を改良
              ⇒プログラムチェンジ、コントロールチェンジ、ピッチベンド、エクスクルーシブメッセージ等を
                出力できるようにした
              ⇒SMF Format-1出力モードを追加
        ▽修正
            ・旧式コメント";"の廃止　★重要
              旧コンパイラではサポートされますが、いずれ廃止します。
            ・MMLファイル入力の不具合修正
            ・ファイル保存、クリップボード出力、標準MIDI出力、プロパティを再生時にも操作できるように変更

    V1.5.0.1
        ▽修正
            ・最適化機能の最適化不具合修正
            ・クリップボード出力のダイアログに最適化機能がβ版であるという記述が
              戻ってしまっている不具合を修正
    
    V1.5.0.0
        ▽新機能
            ・コードウィンドウを改良
              MMLコードを色分けして表示
            ・再生中設定追加
              ⇒再生中のMMLコード選択機能追加
            ・編集メニュー追加
            ・MMLのシンタックス追加
              C/C++風のコメントが使えるようになります。
               // もしくは /*  */
        ▽修正
            ・コード編集時スクロールを編集中設定に移動
            ・MUTE状態で再生するとピアノキービューに残像が残る不具合を修正

    V1.4.0.1
        ▽修正
            ・最適化機能
              最適化不具合修正
              β解除
          
    V1.4.0.0
        ▽新機能
            ・クリップボード出力にMML最適化機能（β版機能）追加
        ▽修正
            ・MML解析エンジン修正
        
    V1.3.3.1 (内部バージョン）
        ▽修正
            ・ピアノロールビューの描画の修正
            ・ファイルパス分離ライブラリの修正

    V1.3.3.0
        ▽新機能
            ・ピアノキービュー追加
            ・DirectMusic標準の音色テーブルでの演奏機能追加
        ▽機能向上
            ・プレイモニター改良
        ▽修正
            ・MML解析エンジンにおいて、デフォルトのベロシティ(V)を8(V8)に修正

    V1.3.2.0
        ▽機能向上
            ・Windows 98 Second Edition に対応
            ・MIDI出力設定を追加
            ・3MLEDM.DLLを廃止（使いません。消してください
        ▽修正
            ・アプリケーションの終了シーケンス変更（内部的変更
    
    V1.3.1.0
        ▽機能向上
            ・ユーザーインターフェースの外見変更
            ・イベントリストの描画性能向上
            ・リンカの設定見直しにより、実行ファイルサイズ削減

    V1.3.0.2
        ▽修正
            ・DMLIB.dllを廃止
              その代わりに3MLEDM.dllを本体と一緒に配布します。
              3MLEDMは新たに設計されたDirectMusic用プラグインです。

    V1.3.0.1
        ▽修正
            ・カレントディレクリの管理の問題で、本ソフトの実行ファイルにファイルに直接MMLファイルを
              ドロップした場合、DLSのロードにこける問題を修正
        
    V1.3.0.0
        ▽新機能
            ・DirectMusic DLSに対応しました。
              マビノギ内と同じ音で演奏できます。
          
    V1.2.1.0
        ▽機能向上
            ・MML解析エンジンが"R"(休符)記号の詳細解析に対応
              ⇒コードウィンドウに"R"(休符)記号が表示されるようになります。
              ⇒ピアノロールビューに「現在のトラック」を選択したときのみ、
                R(休符)記号が灰色のボックスで表示されるようになります。
        ▽修正
            ・コードウィンドウの"End of track"のValueが表示されない不具合を修正
            ・ピアノロールビューターゲット（全て・現在のトラック）、水平垂直表示倍率の設定を保存するように変更
            ・MMLファイルからタイトルが読み込まれない不具合を修正
        
    V1.2.0.2
        ▽修正
            ・コードウィンドウにMMLを打ち込んでもピアノロールの水平スクロールバーに反映されなく、
              スクロールが出来ない不具合を修正

    V1.2.0.1
        ▽機能向上
            ・ピアノロールのターゲットが「現在のトラック」の場合の速度向上
              「すべてのトラック」は向上無し。
        ▽修正
            ・イベントリストがのノートがすべて＃が表示されてしまう不具合を修正
        
    V1.2.0.0
        ▽機能向上
            ・ピアノロール改良
            ・クリップボード入力
                MabiMML形式に対応
            ・クリップボード出力
                対象トラックを選べるように画面を追加
                MabiMML形式を追加
            ・イベントリスト  をオリジナル自力描画ウィンドウに乗せかえ
            ・タブコントロールをオリジナル自力描画ウィンドウに乗せかえ
        ▽修正
            ・実行ファイルにMMLファイルをドロップした場合も起動できるように変更
            ・ピアノロールにてキー操作が利かなかった不具合を修正 (WM_GETDLGCODE応答し忘れ)
            ・クリップボード出力
                １行１トラック形式を廃止
        ▽その他
            ・ウィンドウ名変更
              コードウィンドウ     → イベントリスト
              エディットウィンドウ → コードウィンドウ
            ・ソースコード整理を実施

    V1.1.0.4
        ▽機能向上
            ・巻き戻しボタンを追加
        ▽修正
            ・MML@形式改行ありの出力形式をしたらば形式に変更
            ・リストビューをシングルクリックしたときにピアノロールを追従するように変更
            ・停止ボタンの挙動変更

    V1.1.0.3
        ▽新機能
            ・ピアノロールの拡大縮小機能追加

    V1.1.0.2
        ▽新機能
            ・GDI+の機能を使用しないにもかかわらず、gdiplus.dllがスタティックリンクされていた為
              ディレイドロードすることによって、GDI+が導入されていないWin2Kでも動くようにした。
            ・上書き保存しても変更されていると表示される不具合を修正
        ▽その他
            ・コンパイラ最適化オプション変更
        
    V1.1.0.0
        ▽新機能
            ・ピアノロールビュー実装
        ▽機能向上
            ・MML解析エンジン高速化

    V1.0.0.4
        ▽修正
            ・メニューおよびツールバーの描画ライブラリ修正
            ・楽器の選択状況を保存するように変更

    V1.0.0.3
        ▽新機能
            ・プロパティダイアログを追加
        ▽修正
            ・分解能を設定できるように修正
              ⇒デフォルトを480(TPQN)→32(TPQN)に変更
        ▽その他
            ・Readme.txtを作成

    V1.0.0.2 (内部バージョン)
        ▽新機能
            ・最近使ったファイルを実装
            ・Code Marker機能実装
        ▽修正
            ・MML再生スレッドの優先度変更
            ・PAUSE→STOPもしくはPAUSE→アプリケーション終了するとデッドロックする不具合を修正
            ・クリップボード入力を修正
            ・コードウィンドウ編集時のイベントリストのスクロールの挙動を修正

    V1.0.0.1 (内部バージョン)
        ▽修正
            ・"L"記号で指定された付点が"R"記号で反映されない不具合を修正
            ・コードウィンドウの水平スクロールを表示するように修正
        ▽機能向上
            ・リストビューの描画ルーチンのメッセージ発行回数を４～８０分の１に抑え
              高負荷時のテンポ崩れを軽減

    V1.0.0.0
        ▽新機能
            ・SMF0出力機能を実装

    V0.0.0.1
        初版
-----------------------------------------------------------------------------------------------------